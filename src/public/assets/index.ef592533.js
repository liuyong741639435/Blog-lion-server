import{T as y,E as R}from"./index.esm.f42fd29a.js";import{s as V,l as T,a as h,m as U,u as w,w as L,q as g,d as P,o as k,c as N,b as f,e as _,h as t,v as b,t as H,x as F,y as A,g as I,_ as O}from"./index.3404ca99.js";import{a as q,b as G,c as W}from"./article.020860c5.js";import{d as $}from"./tool.a4dd8783.js";import"./request.8ec64058.js";var x=(e=>(e[e.PUBLIC=0]="PUBLIC",e[e.PRIVATE=1]="PRIVATE",e[e.DELETE=2]="DELETE",e))(x||{});function j(){const e=V(),p={},o={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9..."},u=a=>{e.value=a},l="default";return T(()=>{const a=e.value;a!=null&&a.destroy()}),{editorRef:e,toolbarConfig:p,editorConfig:o,handleCreated:u,mode:l}}function z(){const e=h("");let o=U().params.aId;const u=h("title"),l=h("<p><br></p>"),a=w();function i(n,s,B){q({aId:n}).then(d=>{var r,C,D,E;d.code===0&&(s.value=(C=(r=d.data)==null?void 0:r.title)!=null?C:"",B.value=(E=(D=d.data)==null?void 0:D.content)!=null?E:"")}).catch(d=>console.error(d))}async function c(){e.value="\u4FDD\u5B58\u4E2D...",G({aId:o,title:u.value,content:l.value}).then(n=>{var s;n.code===0?(e.value="\u4FDD\u5B58\u81F3\u8349\u7A3F\u7BB1",(s=n.data)!=null&&s.aId&&(o=n.data.aId,a.push(`/edit/drafts/${o}`))):e.value="\u4FDD\u5B58\u5931\u8D25"}).catch(n=>{e.value="\u4FDD\u5B58\u5931\u8D25",console.error(n)})}function m(){o!==void 0&&W({aId:o,state:x.PUBLIC}).then(n=>{n.code?g.success("\u53D1\u5E03\u6210\u529F"):g.warn(n.msg)})}o!==""&&i(o,u,l);const v=$(c,1e3,!1);return L([u,l],v),{title:u,contentHtml:l,getArticle:i,editArticle:c,publishArticle:m,tips:e}}const J={class:"edit"},K={class:"title"},M={class:"tips"},Q={class:"btn"},X={class:"editBody"},Y={class:"toolbar"},Z={class:"editor"},S=P({__name:"index",setup(e){const{editorRef:p,toolbarConfig:o,editorConfig:u,handleCreated:l,mode:a}=j(),{title:i,contentHtml:c,publishArticle:m,tips:v}=z();return(n,s)=>{const B=A("a-input"),d=A("a-button");return k(),N("div",J,[f("div",K,[_(B,{value:t(i),"onUpdate:value":s[0]||(s[0]=r=>b(i)?i.value=r:null),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["value"]),f("span",M,H(t(v)),1),f("div",Q,[_(d,null,{default:F(()=>[I("\u8349\u7A3F\u7BB1")]),_:1}),_(d,{onClick:t(m)},{default:F(()=>[I("\u53D1\u8868")]),_:1},8,["onClick"])])]),f("div",X,[f("div",Y,[_(t(y),{editor:t(p),defaultConfig:t(o),mode:t(a)},null,8,["editor","defaultConfig","mode"])]),f("div",Z,[_(t(R),{modelValue:t(c),"onUpdate:modelValue":s[1]||(s[1]=r=>b(c)?c.value=r:null),defaultConfig:t(u),mode:t(a),onOnCreated:t(l)},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])])])}}});const se=O(S,[["__scopeId","data-v-e5624107"]]);export{se as default};
